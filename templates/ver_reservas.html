<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Ver Reservas</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/ver_reservas.css') }}">
</head>

<body>

    <div class="container">

        <header class="header">
            <h1>Reservas</h1>
            <img src="{{ url_for('static', filename='img/logo.png') }}" alt="Logo" class="header-logo">
        </header>

        <nav class="nav">
            <a href="/dashboard_empleado" class="nav-link">Inicio</a>
            <a href="/ver_reservas" class="nav-link">Ver Reservas</a>
            <a href="/gestionar_habitaciones" class="nav-link">Habitaciones</a>
            <a href="/gestionar_servicios" class="nav-link">Servicios</a>
            <a href="/logout" class="nav-link logout">Cerrar SesiÃ³n</a>

            <button id="toggle-dark" class="nav-link nav-toggle" type="button">
                ðŸŒ™ Modo oscuro
            </button>
        </nav>

        <main>

            {% if reservas %}
            <table class="tabla">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Cliente</th>
                        <th>HabitaciÃ³n</th>
                        <th>Inicio</th>
                        <th>Fin</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    {% for reserva in reservas %}
                    <tr>
                        <td>{{ reserva.id_reserva }}</td>
                        <td>{{ reserva.cliente.nombre }}</td>
                        <td>{{ reserva.habitacion.numero }}</td>
                        <td>{{ reserva.fecha_inicio.strftime('%Y-%m-%d') }}</td>
                        <td>{{ reserva.fecha_fin.strftime('%Y-%m-%d') }}</td>
                        <td class="estado {{ reserva.estado | lower }}">
                            {{ reserva.estado }}
                        </td>
                        <td>
                            {% if reserva.estado == 'Activa' %}
                            <a class="btn" href="/cerrar_reserva/{{ reserva.id_reserva }}">
                                Cancelar reserva
                            </a>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            {% else %}
            <div class="empty">
                No hay reservas registradas.
            </div>
            {% endif %}

        </main>

    </div>

    <script>
        const toggle = document.getElementById('toggle-dark');
        const body = document.body;

        if (localStorage.getItem('dark-mode') === 'true') {
            body.classList.add('dark');
        }

        toggle.addEventListener('click', () => {
            body.classList.toggle('dark');
            localStorage.setItem('dark-mode', body.classList.contains('dark'));
        });
    </script>

</body>

</html>
