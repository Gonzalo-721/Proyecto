<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Cancelar reserva</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/cancelar_reserva.css') }}">
</head>

<body>
    <div class="container">

        <header class="header">
            <h1>Cancelar reserva</h1>

            <button id="toggle-dark" type="button">
                üåô Modo oscuro
            </button>
        </header>

        <main>
            <section>
                <h2>Informaci√≥n general</h2>

                <p><strong>Habitaci√≥n:</strong>
                    {{ reserva.habitacion.numero }} ({{ reserva.habitacion.tipo }})
                </p>

                <p><strong>Fechas:</strong>
                    {{ reserva.fecha_inicio.strftime('%Y-%m-%d') }}
                    ‚Üí
                    {{ reserva.fecha_fin.strftime('%Y-%m-%d') }}
                </p>

                <p><strong>Estado:</strong> {{ reserva.estado }}</p>

                <p><strong>Precio por noche:</strong>
                    ${{ reserva.habitacion.precio_noche }}
                </p>
            </section>

            <section>
                <h2>Servicios consumidos</h2>

                <ul>
                    {% for c in reserva.consumos %}
                    <li>
                        {{ c.servicio.nombre }} (x{{ c.cantidad }})
                        ‚Äî ${{ c.subtotal }}
                    </li>
                    {% else %}
                    <li>No se a√±adi√≥ ning√∫n servicio</li>
                    {% endfor %}
                </ul>
            </section>

            <section>
                <h2>Total acumulado</h2>
                <p class="total"><strong>${{ total }}</strong></p>
            </section>

            <section class="warning-box">
                <h2>¬øDesea cancelar esta reserva?</h2>

                <p class="warning">
                    Esta acci√≥n finalizar√° la reserva y liberar√° la habitaci√≥n.
                </p>

                <div class="acciones">
                    <form method="POST"
                        action="{{ url_for('cancelar_reserva', id_reserva=reserva.id_reserva) }}">
                        <button type="submit" class="btn btn-danger">
                            S√≠, cancelar
                        </button>
                    </form>

                    <a href="{{ url_for('dashboard_cliente') }}" class="btn btn-secondary">
                        No, volver
                    </a>
                </div>
            </section>
        </main>

    </div>

    <script>
        const toggle = document.getElementById('toggle-dark');
        const body = document.body;

        if (localStorage.getItem('dark-mode') === 'true') {
            body.classList.add('dark');
        }

        toggle.addEventListener('click', () => {
            body.classList.toggle('dark');
            localStorage.setItem(
                'dark-mode',
                body.classList.contains('dark')
            );
        });
    </script>

</body>
</html>
